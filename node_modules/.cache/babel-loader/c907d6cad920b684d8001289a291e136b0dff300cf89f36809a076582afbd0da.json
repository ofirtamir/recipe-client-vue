{"ast":null,"code":"import _regeneratorRuntime from \"C:/Users/User/Documents/GitHub/assignment2-1-208897991_208009845/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"C:/Users/User/Documents/GitHub/assignment2-1-208897991_208009845/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport \"core-js/modules/es.number.constructor.js\";\nimport \"core-js/modules/es.regexp.exec.js\";\nimport \"core-js/modules/es.string.replace.js\";\nimport \"core-js/modules/es.array.push.js\";\nimport { mockGetRecipeFullDetails } from \"../services/recipes.js\";\nimport RecipePage from \"../components/RecipePage.vue\";\nimport { mockGetFamilyRecipe } from \"../services/user.js\";\nimport axios from 'axios';\nexport default {\n  props: {\n    recipeId: {\n      type: [String, Number],\n      required: true\n    },\n    fromAPI: {\n      type: Boolean,\n      required: false,\n      \"default\": false\n    },\n    recipe: {\n      type: Object,\n      required: false\n    }\n  },\n  components: {\n    RecipePage: RecipePage\n  },\n  data: function data() {\n    return {\n      // eslint-disable-next-line vue/no-dupe-keys\n      recipe: null\n    };\n  },\n  created: function created() {\n    var _this = this;\n    return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n      var results, response, url;\n      return _regeneratorRuntime().wrap(function _callee$(_context) {\n        while (1) switch (_context.prev = _context.next) {\n          case 0:\n            _this.recipeId = _this.$route.params.recipeId;\n            if (_this.$route.params.fromAPI) _this.fromAPI = _this.$route.params.fromAPI;\n            if (_this.$route.params.family) _this.family = _this.$route.params.family;\n            _context.prev = 3;\n            if (!_this.family) {\n              _context.next = 12;\n              break;\n            }\n            response = mockGetFamilyRecipe(_this.recipeId);\n            if (!(response.status !== 200)) {\n              _context.next = 9;\n              break;\n            }\n            _this.$router.replace(\"/NotFound\");\n            return _context.abrupt(\"return\");\n          case 9:\n            results = response.response.data.recipes;\n            _context.next = 25;\n            break;\n          case 12:\n            if (!_this.fromAPI) {\n              _context.next = 25;\n              break;\n            }\n            url = \"/api/recipe/\".concat(_this.recipeId); // הכתובת של השרת שלך (אתה יכול להשתמש בנתיב יחסי אם השרת רץ באותו דומיין)\n            _context.prev = 14;\n            _context.next = 17;\n            return axios.get(url);\n          case 17:\n            response = _context.sent;\n            results = response.data; // קבלת הנתונים מהשרת שלך\n            _context.next = 25;\n            break;\n          case 21:\n            _context.prev = 21;\n            _context.t0 = _context[\"catch\"](14);\n            console.error(\"Error fetching recipe from server:\", _context.t0);\n            alert(\"Failed to fetch recipe from server.\");\n          case 25:\n            // else{\n            //   response = mockGetRecipeFullDetails(this.recipeId);\n            //   if (response.status !== 200){\n            //     this.$router.replace(\"/NotFound\");\n            //     return;\n            //   }\n            //   results = response.data.recipe;        \n            // }\n            _this.recipe = results;\n            _context.next = 32;\n            break;\n          case 28:\n            _context.prev = 28;\n            _context.t1 = _context[\"catch\"](3);\n            console.log(_context.t1);\n            alert(_context.t1);\n          case 32:\n          case \"end\":\n            return _context.stop();\n        }\n      }, _callee, null, [[3, 28], [14, 21]]);\n    }))();\n  },\n  methods: {\n    goToMealPreparationPage: function goToMealPreparationPage() {\n      // this.$router.push({ name: 'recipePlanning' });\n      this.$router.push({\n        name: 'MealPreparingPage',\n        params: {\n          recipeId: this.$route.params.recipeId\n        }\n      });\n    }\n  }\n};","map":{"version":3,"names":["mockGetRecipeFullDetails","RecipePage","mockGetFamilyRecipe","axios","props","recipeId","type","String","Number","required","fromAPI","Boolean","recipe","Object","components","data","created","_this","_asyncToGenerator","_regeneratorRuntime","mark","_callee","results","response","url","wrap","_callee$","_context","prev","next","$route","params","family","status","$router","replace","abrupt","recipes","concat","get","sent","t0","console","error","alert","t1","log","stop","methods","goToMealPreparationPage","push","name"],"sources":["src/pages/RecipeViewPage.vue"],"sourcesContent":["<template>\r\n  <div class=\"container\">\r\n     <RecipePage :recipe=recipe />\r\n      <!-- {{ recipeId }}\r\n      {{ fromAPI }}\r\n      {{ this.recipe  }}\r\n      {{ recipe }} -->\r\n       <!-- {{ family }} -->\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n\r\nimport { mockGetRecipeFullDetails } from \"../services/recipes.js\";\r\nimport RecipePage from \"../components/RecipePage.vue\";\r\nimport { mockGetFamilyRecipe } from \"../services/user.js\";\r\nimport axios from 'axios';\r\n\r\nexport default {\r\n  props: {\r\n    recipeId: {\r\n      type: [String, Number],\r\n      required: true\r\n    },\r\n    fromAPI: {\r\n      type: Boolean,\r\n      required: false,\r\n      default: false\r\n    },\r\n    recipe: {\r\n      type: Object,\r\n      required: false\r\n    }\r\n  },\r\n  components: {\r\n    RecipePage\r\n  },\r\n  data() {\r\n    return {\r\n      // eslint-disable-next-line vue/no-dupe-keys\r\n      recipe: null\r\n    };\r\n  },\r\n  async created() {\r\n    this.recipeId = this.$route.params.recipeId;\r\n    if (this.$route.params.fromAPI)\r\n      this.fromAPI = this.$route.params.fromAPI;\r\n    if (this.$route.params.family)\r\n      this.family = this.$route.params.family;\r\n\r\n    try {\r\n      let results, response;\r\n\r\n      if (this.family){\r\n        response = mockGetFamilyRecipe(this.recipeId);\r\n \r\n        if (response.status !== 200){\r\n          this.$router.replace(\"/NotFound\");\r\n          return;\r\n        }\r\n        results = response.response.data.recipes;\r\n      }\r\n      else if (this.fromAPI){\r\n  const url = `/api/recipe/${this.recipeId}`; // הכתובת של השרת שלך (אתה יכול להשתמש בנתיב יחסי אם השרת רץ באותו דומיין)\r\n\r\n  try {\r\n    response = await axios.get(url);\r\n    results = response.data; // קבלת הנתונים מהשרת שלך\r\n  } catch (error) {\r\n    console.error(\"Error fetching recipe from server:\", error);\r\n    alert(\"Failed to fetch recipe from server.\");\r\n  }\r\n}\r\n\r\n      // else{\r\n      //   response = mockGetRecipeFullDetails(this.recipeId);\r\n      //   if (response.status !== 200){\r\n      //     this.$router.replace(\"/NotFound\");\r\n      //     return;\r\n      //   }\r\n      //   results = response.data.recipe;        \r\n      // }\r\n      this.recipe = results;\r\n    } catch (error) {\r\n      console.log(error);\r\n      alert(error)\r\n    }\r\n  },\r\n  methods: {\r\n    goToMealPreparationPage() {\r\n      // this.$router.push({ name: 'recipePlanning' });\r\n      this.$router.push({ name: 'MealPreparingPage', params: { recipeId: this.$route.params.recipeId } });\r\n\r\n    }\r\n  }\r\n};\r\n</script>\r\n</style>"],"mappings":";;;;;;AAaA,SAAAA,wBAAA;AACA,OAAAC,UAAA;AACA,SAAAC,mBAAA;AACA,OAAAC,KAAA;AAEA;EACAC,KAAA;IACAC,QAAA;MACAC,IAAA,GAAAC,MAAA,EAAAC,MAAA;MACAC,QAAA;IACA;IACAC,OAAA;MACAJ,IAAA,EAAAK,OAAA;MACAF,QAAA;MACA;IACA;IACAG,MAAA;MACAN,IAAA,EAAAO,MAAA;MACAJ,QAAA;IACA;EACA;EACAK,UAAA;IACAb,UAAA,EAAAA;EACA;EACAc,IAAA,WAAAA,KAAA;IACA;MACA;MACAH,MAAA;IACA;EACA;EACAI,OAAA,WAAAA,QAAA;IAAA,IAAAC,KAAA;IAAA,OAAAC,iBAAA,eAAAC,mBAAA,GAAAC,IAAA,UAAAC,QAAA;MAAA,IAAAC,OAAA,EAAAC,QAAA,EAAAC,GAAA;MAAA,OAAAL,mBAAA,GAAAM,IAAA,UAAAC,SAAAC,QAAA;QAAA,kBAAAA,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAE,IAAA;UAAA;YACAZ,KAAA,CAAAZ,QAAA,GAAAY,KAAA,CAAAa,MAAA,CAAAC,MAAA,CAAA1B,QAAA;YACA,IAAAY,KAAA,CAAAa,MAAA,CAAAC,MAAA,CAAArB,OAAA,EACAO,KAAA,CAAAP,OAAA,GAAAO,KAAA,CAAAa,MAAA,CAAAC,MAAA,CAAArB,OAAA;YACA,IAAAO,KAAA,CAAAa,MAAA,CAAAC,MAAA,CAAAC,MAAA,EACAf,KAAA,CAAAe,MAAA,GAAAf,KAAA,CAAAa,MAAA,CAAAC,MAAA,CAAAC,MAAA;YAAAL,QAAA,CAAAC,IAAA;YAAA,KAKAX,KAAA,CAAAe,MAAA;cAAAL,QAAA,CAAAE,IAAA;cAAA;YAAA;YACAN,QAAA,GAAArB,mBAAA,CAAAe,KAAA,CAAAZ,QAAA;YAAA,MAEAkB,QAAA,CAAAU,MAAA;cAAAN,QAAA,CAAAE,IAAA;cAAA;YAAA;YACAZ,KAAA,CAAAiB,OAAA,CAAAC,OAAA;YAAA,OAAAR,QAAA,CAAAS,MAAA;UAAA;YAGAd,OAAA,GAAAC,QAAA,CAAAA,QAAA,CAAAR,IAAA,CAAAsB,OAAA;YAAAV,QAAA,CAAAE,IAAA;YAAA;UAAA;YAAA,KAEAZ,KAAA,CAAAP,OAAA;cAAAiB,QAAA,CAAAE,IAAA;cAAA;YAAA;YACAL,GAAA,kBAAAc,MAAA,CAAArB,KAAA,CAAAZ,QAAA;YAAAsB,QAAA,CAAAC,IAAA;YAAAD,QAAA,CAAAE,IAAA;YAAA,OAGA1B,KAAA,CAAAoC,GAAA,CAAAf,GAAA;UAAA;YAAAD,QAAA,GAAAI,QAAA,CAAAa,IAAA;YACAlB,OAAA,GAAAC,QAAA,CAAAR,IAAA;YAAAY,QAAA,CAAAE,IAAA;YAAA;UAAA;YAAAF,QAAA,CAAAC,IAAA;YAAAD,QAAA,CAAAc,EAAA,GAAAd,QAAA;YAEAe,OAAA,CAAAC,KAAA,uCAAAhB,QAAA,CAAAc,EAAA;YACAG,KAAA;UAAA;YAIA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA3B,KAAA,CAAAL,MAAA,GAAAU,OAAA;YAAAK,QAAA,CAAAE,IAAA;YAAA;UAAA;YAAAF,QAAA,CAAAC,IAAA;YAAAD,QAAA,CAAAkB,EAAA,GAAAlB,QAAA;YAEAe,OAAA,CAAAI,GAAA,CAAAnB,QAAA,CAAAkB,EAAA;YACAD,KAAA,CAAAjB,QAAA,CAAAkB,EAAA;UAAA;UAAA;YAAA,OAAAlB,QAAA,CAAAoB,IAAA;QAAA;MAAA,GAAA1B,OAAA;IAAA;EAEA;EACA2B,OAAA;IACAC,uBAAA,WAAAA,wBAAA;MACA;MACA,KAAAf,OAAA,CAAAgB,IAAA;QAAAC,IAAA;QAAApB,MAAA;UAAA1B,QAAA,OAAAyB,MAAA,CAAAC,MAAA,CAAA1B;QAAA;MAAA;IAEA;EACA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}
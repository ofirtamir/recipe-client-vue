{"ast":null,"code":"import _regeneratorRuntime from \"C:/Users/User/Documents/GitHub/assignment2-1-208897991_208009845/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"C:/Users/User/Documents/GitHub/assignment2-1-208897991_208009845/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport \"core-js/modules/es.array.push.js\";\nimport { required } from \"vuelidate/lib/validators\";\nimport { mockLogin } from \"../services/auth.js\";\nexport default {\n  name: \"Login\",\n  data: function data() {\n    return {\n      form: {\n        username: \"\",\n        password: \"\",\n        submitError: undefined\n      }\n    };\n  },\n  validations: {\n    form: {\n      username: {\n        required: required\n      },\n      password: {\n        required: required\n      }\n    }\n  },\n  methods: {\n    validateState: function validateState(param) {\n      var _this$$v$form$param = this.$v.form[param],\n        $dirty = _this$$v$form$param.$dirty,\n        $error = _this$$v$form$param.$error;\n      return $dirty ? !$error : null;\n    },\n    Login: function Login() {\n      var _this = this;\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n        var success, response;\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) switch (_context.prev = _context.next) {\n            case 0:\n              try {\n                // const response = await this.axios.post(\n                //   this.$root.store.server_domain +\"/Login\",\n                //   {\n                //     username: this.form.username,\n                //     password: this.form.password\n                //   }\n                // );\n                success = true; // modify this to test the error handling\n                response = mockLogin(_this.form.username, _this.form.password, success); // console.log(response);\n                // this.$root.loggedIn = true;\n                console.log(_this.$root.store.login);\n                _this.$root.store.login(_this.form.username);\n                _this.$router.push(\"/\");\n              } catch (err) {\n                console.log(err.response);\n                _this.form.submitError = err.response.data.message;\n              }\n            case 1:\n            case \"end\":\n              return _context.stop();\n          }\n        }, _callee);\n      }))();\n    },\n    onLogin: function onLogin() {\n      // console.log(\"login method called\");\n      this.form.submitError = undefined;\n      this.$v.form.$touch();\n      if (this.$v.form.$anyError) {\n        return;\n      }\n      // console.log(\"login method go\");\n\n      this.Login();\n    }\n  }\n};","map":{"version":3,"names":["required","mockLogin","name","data","form","username","password","submitError","undefined","validations","methods","validateState","param","_this$$v$form$param","$v","$dirty","$error","Login","_this","_asyncToGenerator","_regeneratorRuntime","mark","_callee","success","response","wrap","_callee$","_context","prev","next","console","log","$root","store","login","$router","push","err","message","stop","onLogin","$touch","$anyError"],"sources":["src/components/Login.vue"],"sourcesContent":["<template>\r\n  <div class=\"container\">\r\n    <h1 class=\"title\">Login</h1>\r\n    <b-form @submit.prevent=\"onLogin\">\r\n      <b-form-group\r\n        id=\"input-group-Username\"\r\n        label-cols-sm=\"3\"\r\n        label=\"Username:\"\r\n        label-for=\"Username\"\r\n      >\r\n        <b-form-input\r\n          id=\"Username\"\r\n          v-model=\"$v.form.username.$model\"\r\n          type=\"text\"\r\n          :state=\"validateState('username')\"\r\n        ></b-form-input>\r\n        <b-form-invalid-feedback>\r\n          Username is required\r\n        </b-form-invalid-feedback>\r\n      </b-form-group>\r\n\r\n      <b-form-group\r\n        id=\"input-group-Password\"\r\n        label-cols-sm=\"3\"\r\n        label=\"Password:\"\r\n        label-for=\"Password\"\r\n      >\r\n        <b-form-input\r\n          id=\"Password\"\r\n          type=\"password\"\r\n          v-model=\"$v.form.password.$model\"\r\n          :state=\"validateState('password')\"\r\n        ></b-form-input>\r\n        <b-form-invalid-feedback>\r\n          Password is required\r\n        </b-form-invalid-feedback>\r\n      </b-form-group>\r\n\r\n      <b-button\r\n        type=\"submit\"\r\n        variant=\"primary\"\r\n        style=\"width:100px;display:block;\"\r\n        class=\"mx-auto w-100\"\r\n        >Login</b-button\r\n      >\r\n      <div class=\"mt-2\">\r\n        Do not have an account yet?\r\n        <router-link to=\"registerpage\"> Register in here</router-link>\r\n      </div>\r\n    </b-form>\r\n    <b-alert\r\n      class=\"mt-2\"\r\n      v-if=\"form.submitError\"\r\n      variant=\"warning\"\r\n      dismissible\r\n      show\r\n    >\r\n      Login failed: {{ form.submitError }}\r\n    </b-alert>\r\n    <!-- <b-card class=\"mt-3\" header=\"Form Data Result\">\r\n      <pre class=\"m-0\">{{ form }}</pre>\r\n    </b-card> -->\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { required } from \"vuelidate/lib/validators\";\r\nimport {mockLogin} from \"../services/auth.js\"\r\nexport default {\r\n  name: \"Login\",\r\n  data() {\r\n    return {\r\n      form: {\r\n        username: \"\",\r\n        password: \"\",\r\n        submitError: undefined\r\n      }\r\n    };\r\n  },\r\n  validations: {\r\n    form: {\r\n      username: {\r\n        required\r\n      },\r\n      password: {\r\n        required\r\n      }\r\n    }\r\n  },\r\n  methods: {\r\n    validateState(param) {\r\n      const { $dirty, $error } = this.$v.form[param];\r\n      return $dirty ? !$error : null;\r\n    },\r\n    async Login() {\r\n      try {\r\n        \r\n        // const response = await this.axios.post(\r\n        //   this.$root.store.server_domain +\"/Login\",\r\n\r\n\r\n        //   {\r\n        //     username: this.form.username,\r\n        //     password: this.form.password\r\n        //   }\r\n        // );\r\n\r\n        const success = true; // modify this to test the error handling\r\n        const response = mockLogin(this.form.username, this.form.password, success);\r\n\r\n        // console.log(response);\r\n        // this.$root.loggedIn = true;\r\n        console.log(this.$root.store.login);\r\n        this.$root.store.login(this.form.username);\r\n        this.$router.push(\"/\");\r\n      } catch (err) {\r\n        console.log(err.response);\r\n        this.form.submitError = err.response.data.message;\r\n      }\r\n    },\r\n\r\n    onLogin() {\r\n      // console.log(\"login method called\");\r\n      this.form.submitError = undefined;\r\n      this.$v.form.$touch();\r\n      if (this.$v.form.$anyError) {\r\n        return;\r\n      }\r\n      // console.log(\"login method go\");\r\n\r\n      this.Login();\r\n    }\r\n  }\r\n};\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n.container {\r\n  display: flex;\r\n  flex-direction: column;\r\n  width: 500px;\r\n  text-align: center;\r\n}\r\n.title {\r\n  margin-bottom: 1rem;\r\n}\r\n</style>\r\n"],"mappings":";;;AAkEA,SAAAA,QAAA;AACA,SAAAC,SAAA;AACA;EACAC,IAAA;EACAC,IAAA,WAAAA,KAAA;IACA;MACAC,IAAA;QACAC,QAAA;QACAC,QAAA;QACAC,WAAA,EAAAC;MACA;IACA;EACA;EACAC,WAAA;IACAL,IAAA;MACAC,QAAA;QACAL,QAAA,EAAAA;MACA;MACAM,QAAA;QACAN,QAAA,EAAAA;MACA;IACA;EACA;EACAU,OAAA;IACAC,aAAA,WAAAA,cAAAC,KAAA;MACA,IAAAC,mBAAA,QAAAC,EAAA,CAAAV,IAAA,CAAAQ,KAAA;QAAAG,MAAA,GAAAF,mBAAA,CAAAE,MAAA;QAAAC,MAAA,GAAAH,mBAAA,CAAAG,MAAA;MACA,OAAAD,MAAA,IAAAC,MAAA;IACA;IACAC,KAAA,WAAAA,MAAA;MAAA,IAAAC,KAAA;MAAA,OAAAC,iBAAA,eAAAC,mBAAA,GAAAC,IAAA,UAAAC,QAAA;QAAA,IAAAC,OAAA,EAAAC,QAAA;QAAA,OAAAJ,mBAAA,GAAAK,IAAA,UAAAC,SAAAC,QAAA;UAAA,kBAAAA,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAE,IAAA;YAAA;cACA;gBAEA;gBACA;gBAGA;gBACA;gBACA;gBACA;gBACA;gBAEAN,OAAA;gBACAC,QAAA,GAAAvB,SAAA,CAAAiB,KAAA,CAAAd,IAAA,CAAAC,QAAA,EAAAa,KAAA,CAAAd,IAAA,CAAAE,QAAA,EAAAiB,OAAA,GAEA;gBACA;gBACAO,OAAA,CAAAC,GAAA,CAAAb,KAAA,CAAAc,KAAA,CAAAC,KAAA,CAAAC,KAAA;gBACAhB,KAAA,CAAAc,KAAA,CAAAC,KAAA,CAAAC,KAAA,CAAAhB,KAAA,CAAAd,IAAA,CAAAC,QAAA;gBACAa,KAAA,CAAAiB,OAAA,CAAAC,IAAA;cACA,SAAAC,GAAA;gBACAP,OAAA,CAAAC,GAAA,CAAAM,GAAA,CAAAb,QAAA;gBACAN,KAAA,CAAAd,IAAA,CAAAG,WAAA,GAAA8B,GAAA,CAAAb,QAAA,CAAArB,IAAA,CAAAmC,OAAA;cACA;YAAA;YAAA;cAAA,OAAAX,QAAA,CAAAY,IAAA;UAAA;QAAA,GAAAjB,OAAA;MAAA;IACA;IAEAkB,OAAA,WAAAA,QAAA;MACA;MACA,KAAApC,IAAA,CAAAG,WAAA,GAAAC,SAAA;MACA,KAAAM,EAAA,CAAAV,IAAA,CAAAqC,MAAA;MACA,SAAA3B,EAAA,CAAAV,IAAA,CAAAsC,SAAA;QACA;MACA;MACA;;MAEA,KAAAzB,KAAA;IACA;EACA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}
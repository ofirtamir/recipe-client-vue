{"ast":null,"code":"import _regeneratorRuntime from \"C:/Users/User/Documents/GitHub/assignment2-1-208897991_208009845/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _toConsumableArray from \"C:/Users/User/Documents/GitHub/assignment2-1-208897991_208009845/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";\nimport _asyncToGenerator from \"C:/Users/User/Documents/GitHub/assignment2-1-208897991_208009845/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport \"core-js/modules/es.array.concat.js\";\nimport \"core-js/modules/es.regexp.exec.js\";\nimport \"core-js/modules/es.string.replace.js\";\nimport \"core-js/modules/es.array.reduce.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.array.map.js\";\nimport \"core-js/modules/es.function.name.js\";\nimport \"core-js/modules/es.array.push.js\";\nimport { mockGetRecipeFullDetails } from \"../services/recipes.js\";\nimport RecipePage from \"../components/RecipePage.vue\";\nexport default {\n  props: {\n    recipeId: {\n      type: Object,\n      required: true\n    },\n    fromAPI: {\n      type: Boolean,\n      required: false\n    }\n  },\n  components: {\n    RecipePage: RecipePage\n  },\n  data: function data() {\n    return {\n      recipe: null\n    };\n  },\n  created: function created() {\n    var _this = this;\n    return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n      var response, url, _response, results, _response$data$recipe, analyzedInstructions, instructions, extendedIngredients, aggregateLikes, readyInMinutes, image, title, _instructions, _recipe;\n      return _regeneratorRuntime().wrap(function _callee$(_context) {\n        while (1) switch (_context.prev = _context.next) {\n          case 0:\n            _context.prev = 0;\n            if (!_this.fromAPI) {\n              _context.next = 19;\n              break;\n            }\n            url = \"https://api.spoonacular.com/recipes/complexSearch?query=\".concat(_this.query, \"&number=\").concat(_this.numberOfResults, \"&apiKey=\").concat(apiKey, \"&addRecipeInformation=true\");\n            _context.prev = 3;\n            _context.next = 6;\n            return axios.get(url);\n          case 6:\n            _response = _context.sent;\n            if (_response.status !== 200) _this.$router.replace(\"/NotFound\");\n            results = _response.data.results;\n            _this.recipes = results;\n            _context.next = 17;\n            break;\n          case 12:\n            _context.prev = 12;\n            _context.t0 = _context[\"catch\"](3);\n            console.log(\"error.response.status\", _context.t0.response.status);\n            _this.$router.replace(\"/NotFound\");\n            return _context.abrupt(\"return\");\n          case 17:\n            _context.next = 21;\n            break;\n          case 19:\n            response = mockGetRecipeFullDetails(recipeId);\n            if (response.status !== 200) _this.$router.replace(\"/NotFound\");\n          case 21:\n            _response$data$recipe = response.data.recipe, analyzedInstructions = _response$data$recipe.analyzedInstructions, instructions = _response$data$recipe.instructions, extendedIngredients = _response$data$recipe.extendedIngredients, aggregateLikes = _response$data$recipe.aggregateLikes, readyInMinutes = _response$data$recipe.readyInMinutes, image = _response$data$recipe.image, title = _response$data$recipe.title;\n            _instructions = analyzedInstructions.map(function (fstep) {\n              fstep.steps[0].step = fstep.name + fstep.steps[0].step;\n              return fstep.steps;\n            }).reduce(function (a, b) {\n              return [].concat(_toConsumableArray(a), _toConsumableArray(b));\n            }, []);\n            _recipe = {\n              instructions: instructions,\n              _instructions: _instructions,\n              analyzedInstructions: analyzedInstructions,\n              extendedIngredients: extendedIngredients,\n              aggregateLikes: aggregateLikes,\n              readyInMinutes: readyInMinutes,\n              image: image,\n              title: title\n            };\n            _this.recipe = _recipe;\n            _context.next = 30;\n            break;\n          case 27:\n            _context.prev = 27;\n            _context.t1 = _context[\"catch\"](0);\n            console.log(_context.t1);\n          case 30:\n          case \"end\":\n            return _context.stop();\n        }\n      }, _callee, null, [[0, 27], [3, 12]]);\n    }))();\n  },\n  methods: {\n    goToMealPreparationPage: function goToMealPreparationPage() {\n      this.$router.push({\n        name: 'recipePlanning'\n      });\n      // this.$router.push({ name: 'MealPreparingPage', params: { recipeId: this.$route.params.recipeId } });\n    }\n  }\n};","map":{"version":3,"names":["mockGetRecipeFullDetails","RecipePage","props","recipeId","type","Object","required","fromAPI","Boolean","components","data","recipe","created","_this","_asyncToGenerator","_regeneratorRuntime","mark","_callee","response","url","_response","results","_response$data$recipe","analyzedInstructions","instructions","extendedIngredients","aggregateLikes","readyInMinutes","image","title","_instructions","_recipe","wrap","_callee$","_context","prev","next","concat","query","numberOfResults","apiKey","axios","get","sent","status","$router","replace","recipes","t0","console","log","abrupt","map","fstep","steps","step","name","reduce","a","b","_toConsumableArray","t1","stop","methods","goToMealPreparationPage","push"],"sources":["src/pages/RecipeViewPage.vue"],"sourcesContent":["<template>\r\n  <div class=\"container\">\r\n    <RecipePage :recipe=\"recipe\" />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n\r\nimport { mockGetRecipeFullDetails } from \"../services/recipes.js\";\r\nimport RecipePage from \"../components/RecipePage.vue\";\r\nexport default {\r\n  props: {\r\n    recipeId: {\r\n      type: Object,\r\n      required: true\r\n    },\r\n    fromAPI: {\r\n      type: Boolean,\r\n      required: false\r\n    }\r\n  },\r\n  components: {\r\n    RecipePage\r\n  },\r\n  data() {\r\n    return {\r\n      recipe: null\r\n    };\r\n  },\r\n  async created() {\r\n    try {\r\n      let response;\r\n      if (this.fromAPI){\r\n        const url = `https://api.spoonacular.com/recipes/complexSearch?query=${this.query}&number=${this.numberOfResults}&apiKey=${apiKey}&addRecipeInformation=true`;\r\n        try {\r\n          const response = await axios.get(url);\r\n          if (response.status !== 200) this.$router.replace(\"/NotFound\");\r\n          let results = response.data.results;\r\n          this.recipes = results;\r\n        } catch (error) {\r\n        console.log(\"error.response.status\", error.response.status);\r\n        this.$router.replace(\"/NotFound\");\r\n        return;\r\n        }\r\n      } else {\r\n        response = mockGetRecipeFullDetails(recipeId);\r\n        if (response.status !== 200) this.$router.replace(\"/NotFound\");\r\n      }\r\n\r\n      let {\r\n        analyzedInstructions,\r\n        instructions,\r\n        extendedIngredients,\r\n        aggregateLikes,\r\n        readyInMinutes,\r\n        image,\r\n        title\r\n      } = response.data.recipe;\r\n\r\n      let _instructions = analyzedInstructions\r\n        .map((fstep) => {\r\n          fstep.steps[0].step = fstep.name + fstep.steps[0].step;\r\n          return fstep.steps;\r\n        })\r\n        .reduce((a, b) => [...a, ...b], []);\r\n\r\n      let _recipe = {\r\n        instructions,\r\n        _instructions,\r\n        analyzedInstructions,\r\n        extendedIngredients,\r\n        aggregateLikes,\r\n        readyInMinutes,\r\n        image,\r\n        title\r\n      };\r\n\r\n      this.recipe = _recipe;\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  },\r\n  methods: {\r\n    goToMealPreparationPage() {\r\n      this.$router.push({ name: 'recipePlanning' });\r\n      // this.$router.push({ name: 'MealPreparingPage', params: { recipeId: this.$route.params.recipeId } });\r\n\r\n    }\r\n  }\r\n};\r\n</script>\r\n</style>"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}
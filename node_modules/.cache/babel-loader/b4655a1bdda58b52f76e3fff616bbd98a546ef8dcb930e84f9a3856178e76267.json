{"ast":null,"code":"import _regeneratorRuntime from \"C:/Users/User/Documents/GitHub/assignment2-1-208897991_208009845/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"C:/Users/User/Documents/GitHub/assignment2-1-208897991_208009845/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport \"core-js/modules/es.array.includes.js\";\nimport \"core-js/modules/es.string.includes.js\";\n// import { addFavorite, deleteFavorite } from \"../services/user.js\";\nexport default {\n  name: 'icons',\n  data: function data() {\n    return {\n      image_load: true,\n      isFavorite: false,\n      isViewed: false\n    };\n  },\n  props: {\n    recipe: {\n      required: true\n    }\n  },\n  computed: {\n    favoriteImage: function favoriteImage() {\n      return this.isFavorite ? require('@/assets/favorite-icon.png') : require('@/assets/not-favorite-icon.png');\n    }\n  },\n  methods: {\n    checkIfViewed: function checkIfViewed() {\n      var viewedRecipes = JSON.parse(localStorage.getItem('viewedRecipes')) || [];\n      return viewedRecipes.includes(this.recipe.id);\n    },\n    toggleFavorite: function toggleFavorite() {\n      this.isFavorite = !this.isFavorite;\n      var action = this.isFavorite ? this.addFavorite : this.deleteFavorite;\n      try {\n        var username = this.$root.store.username;\n        var serverResponse = action(username, this.recipe.id);\n        var status = serverResponse.status,\n          data = serverResponse.response.data;\n        if (status === 200 && data.success) {\n          console.log(data.message);\n          this.showToast(data.message, 'Success', 'success');\n        } else {\n          this.handleError(serverResponse);\n        }\n      } catch (error) {\n        this.handleError(error);\n      }\n    },\n    showToast: function showToast(message, title, variant) {\n      this.$bvToast.toast(message, {\n        title: title,\n        variant: variant,\n        solid: true\n      });\n    },\n    handleError: function handleError(error) {\n      console.error('Error updating favorite status:', error);\n      this.showToast('Error updating favorite status', 'Error', 'danger');\n    },\n    created: function created() {\n      this.isViewed = this.checkIfViewed(this.recipe.id);\n    },\n    updated: function updated() {\n      this.isViewed = this.checkIfViewed(this.recipe.id);\n    },\n    addFavorite: function addFavorite() {\n      var _this = this;\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n        var username, recipeId, response;\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) switch (_context.prev = _context.next) {\n            case 0:\n              username = _this.$root.store.username;\n              recipeId = _this.recipe.id;\n              _context.next = 4;\n              return _this.axios.post(_this.$root.store.server_domain + '/favorites', {\n                recipeId: recipeId,\n                username: username\n              });\n            case 4:\n              response = _context.sent;\n              console.log(response);\n            case 6:\n            case \"end\":\n              return _context.stop();\n          }\n        }, _callee);\n      }))();\n    },\n    deleteFavorite: function deleteFavorite() {\n      var _this2 = this;\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2() {\n        var username, recipeId, response;\n        return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n          while (1) switch (_context2.prev = _context2.next) {\n            case 0:\n              username = _this2.$root.store.username;\n              recipeId = _this2.recipe.id;\n              _context2.next = 4;\n              return _this2.axios[\"delete\"](_this2.$root.store.server_domain + '/favorites', {\n                recipeId: recipeId,\n                username: username\n              });\n            case 4:\n              response = _context2.sent;\n              console.log(response);\n            case 6:\n            case \"end\":\n              return _context2.stop();\n          }\n        }, _callee2);\n      }))();\n    }\n  }\n};","map":{"version":3,"names":["name","data","image_load","isFavorite","isViewed","props","recipe","required","computed","favoriteImage","require","methods","checkIfViewed","viewedRecipes","JSON","parse","localStorage","getItem","includes","id","toggleFavorite","action","addFavorite","deleteFavorite","username","$root","store","serverResponse","status","response","success","console","log","message","showToast","handleError","error","title","variant","$bvToast","toast","solid","created","updated","_this","_asyncToGenerator","_regeneratorRuntime","mark","_callee","recipeId","wrap","_callee$","_context","prev","next","axios","post","server_domain","sent","stop","_this2","_callee2","_callee2$","_context2"],"sources":["src/components/Icons.vue"],"sourcesContent":["<template>\r\n    \r\n    <div class=\"footer-icons\">\r\n        <b-icon v-if=\"checkIfViewed()\" icon=\"eye\" class=\"viewed-icon\"></b-icon>\r\n        <span :to=\"{ name: 'recipe', params: { recipeId: recipe.id } }\" v-if=\"recipe.vegetarian\"><img src=\"https://upload.wikimedia.org/wikipedia/commons/thumb/e/ee/Vegetarian-mark.svg/1200px-Vegetarian-mark.svg.png\" class=\"vegi\" /></span>\r\n        <span v-if=\"recipe.vegan\"><img src=\"https://uxwing.com/wp-content/themes/uxwing/download/food-and-drinks/vegan-icon.png\" class=\"vegan\" /></span>\r\n        <span v-if=\"recipe.glutenFree\"><img src=\"https://cdn-icons-png.flaticon.com/512/4337/4337722.png\" class=\"glutenFree\" /></span>\r\n        \r\n\r\n        <label style=\"background-color: transparent;\">\r\n        <input type=\"checkbox\" @change=\"toggleFavorite\" class=\"custom-checkbox\"> \r\n        <img :src=\"favoriteImage\" alt=\"Favorite\" class=\"favorite-icon\">\r\n        </label>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n// import { addFavorite, deleteFavorite } from \"../services/user.js\";\r\nexport default {\r\n    name: 'icons',\r\n    data() {\r\n        return {\r\n            image_load: true,\r\n            isFavorite: false,\r\n            isViewed: false\r\n        };\r\n    },\r\n    props: {\r\n        recipe: {\r\n            required: true\r\n        }\r\n    },\r\n    computed: {\r\n        favoriteImage() {\r\n            return this.isFavorite ? require('@/assets/favorite-icon.png') : require('@/assets/not-favorite-icon.png');\r\n        }\r\n    },\r\n    methods: {\r\n        checkIfViewed() {\r\n            let viewedRecipes = JSON.parse(localStorage.getItem('viewedRecipes')) || [];\r\n            return viewedRecipes.includes(this.recipe.id);\r\n        },\r\n        \r\n        toggleFavorite() {\r\n            this.isFavorite = !this.isFavorite;\r\n            const action = this.isFavorite ? this.addFavorite : this.deleteFavorite;\r\n\r\n            try {\r\n                const username = this.$root.store.username;\r\n                const serverResponse = action(username, this.recipe.id);\r\n\r\n                const { status, response: { data } } = serverResponse;\r\n\r\n                if (status === 200 && data.success) {\r\n                console.log(data.message);\r\n                this.showToast(data.message, 'Success', 'success');\r\n                } else {\r\n                this.handleError(serverResponse);\r\n                }\r\n            } catch (error) {\r\n                this.handleError(error);\r\n            }\r\n        },\r\n\r\n        showToast(message, title, variant) {\r\n            this.$bvToast.toast(message, {\r\n                title,\r\n                variant,\r\n                solid: true\r\n            });\r\n        },\r\n\r\n        handleError(error) {\r\n            console.error('Error updating favorite status:', error);\r\n            this.showToast('Error updating favorite status', 'Error', 'danger');\r\n        },\r\n        created() {\r\n            this.isViewed = this.checkIfViewed(this.recipe.id);\r\n        },\r\n        updated() {\r\n            this.isViewed = this.checkIfViewed(this.recipe.id);\r\n        },\r\n        async addFavorite() {\r\n            const username = this.$root.store.username;\r\n            const recipeId = this.recipe.id;\r\n            const response = await this.axios.post(this.$root.store.server_domain + '/favorites', {\r\n                recipeId,username\r\n            });\r\n            console.log(response);\r\n        },\r\n        async deleteFavorite() {\r\n            const username = this.$root.store.username;\r\n            const recipeId = this.recipe.id;\r\n            const response = await this.axios.delete(this.$root.store.server_domain + '/favorites', {    \r\n                recipeId,username\r\n            });\r\n            console.log(response);\r\n        }\r\n  }\r\n}\r\n</script>\r\n\r\n\r\n<style scoped>\r\n.vegan,\r\n.glutenFree,\r\n.vegi {\r\n  width: 30px;\r\n  height: auto;\r\n}\r\n.favorite-icon\r\n{\r\n  width: 30px;\r\n  height: auto;\r\n  margin-top: 5px;\r\n}\r\n\r\n.custom-checkbox {\r\n  opacity: 0; /* Make it invisible */\r\n  width: 0;\r\n  height: 0;\r\n}\r\n</style>"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}